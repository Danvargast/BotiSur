<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Botisur</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .card-img-top-custom {
            height: 200px;
            object-fit: cover;
        }
    </style>
</head>

<body>
    <!-- Start Main Top -->
    <header class="main-header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-default bootsnav">
            <div class="container">
                <div class="navbar-header">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu">
                        <i class="fa fa-bars"></i>
                    </button>
                    <!-- <a class="navbar-brand" href="index.html"><img src="images/logo.png" class="logo" alt=""></a> -->
                </div>
                <div class="collapse navbar-collapse" id="navbar-menu">
                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item active"><a class="nav-link" href="index.html">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" href="shop.html">Tienda</a></li>
                        <li class="nav-item"><a class="nav-link" href="recetas.html">Recetas</a></li>
                        <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
                    </ul>
                </div>
                <div id="auth-container" class="login-box d-flex align-items-center ml-4">
                    <div id="logged-out-view" style="display: none;">
                        <a href="registro.html" class="btn btn-outline-primary mr-2">Registrarse</a>
                        <a href="login.html" class="btn btn-primary">Iniciar Sesi칩n</a>
                    </div>
                    <div id="logged-in-view" style="display: none;">
                        <span id="user-greeting" class="mr-3 text-dark"></span>
                        <button id="logout-btn" class="btn btn-outline-danger">Cerrar Sesi칩n</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <!-- End Main Top -->

    <!-- Start Slider -->
    <div id="slides-shop" class="cover-slides">
        <ul class="slides-container">
            <li class="text-center">
                <img src="images/fotobanner1.jpg" alt="">
                <div class="container"><div class="row"><div class="col-md-12"><h1 class="m-b-20"><strong>Bienvenido a <br> Botisur</strong></h1><p class="m-b-40">Descubre la mejor selecci칩n de cervezas, vinos y destilados para cada ocasi칩n.</p><p><a class="btn hvr-hover" href="shop.html">Comprar</a></p></div></div></div>
            </li>
            <li class="text-center">
                <img src="images/barrilesbanner.jpg" alt="">
                <div class="container"><div class="row"><div class="col-md-12"><h1 class="m-b-20"><strong>Bienvenido a <br> Botisur</strong></h1><p class="m-b-40">Disfruta de una amplia variedad de cervezas, vinos y destilados seleccionados para ti.</p><p><a class="btn hvr-hover" href="shop.html">Comprar</a></p></div></div></div>
            </li>
        </ul>
        <div class="slides-navigation"><a href="#" class="next"><i class="fa fa-angle-right" aria-hidden="true"></i></a><a href="#" class="prev"><i class="fa fa-angle-left" aria-hidden="true"></i></a></div>
    </div>
    <!-- End Slider -->
    
    <!-- Ofertas de la Semana (Din치mico) -->
    <section class="products-box">
        <div class="container">
            <div class="title-all text-center">
                <h1>游댠 Ofertas de la Semana 游댠</h1>
            </div>
            <!-- Contenedor para las ofertas din치micas -->
            <div id="ofertas-container" class="row">
                <!-- El carrusel se llenar치 din치micamente -->
            </div>
        </div>
    </section>

    <!-- Productos m치s vendidos (Din치mico) -->
    <div class="products-box">
        <div class="container">
            <div class="title-all text-center">
                <h1>Nuestros productos m치s vendidos</h1>
                <p>Explora nuestra selecci칩n de cervezas, vinos y refrescos para cada ocasi칩n.</p>
            </div>
            <!-- Contenedor para los productos destacados -->
            <div id="destacados-container" class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                <!-- Los productos se cargar치n aqu칤 -->
            </div>
        </div>
    </div>

    <!-- Start Footer  -->
    <footer>
        <div class="footer-main"><div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-top-box"><h3>Horario de atenci칩n</h3><ul class="list-time"><li>Lunes a Viernes: 08.00am a 05.00pm</li><li>S치bado: 10.00am a 08.00pm</li><li>Domingo: <span>Cerrado</span></li></ul></div></div>
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-top-box"><h3>Subscr칤bete</h3><form class="newsletter-box"><div class="form-group"><input class="" type="email" name="Email" placeholder="Direcci칩n de correo*" /><i class="fa fa-envelope"></i></div><button class="btn hvr-hover" type="submit">Enviar</button></form></div></div>
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-top-box"><h3>Redes sociales</h3><p>S칤guenos en nuestras redes sociales.</p><ul><li><a href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a href="#"><i class="fab fa-instagram" aria-hidden="true"></i></a></li><li><a href="#"><i class="fab fa-whatsapp" aria-hidden="true"></i></a></li></ul></div></div>
            </div><hr>
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-widget"><h4>Acerca de Botisur</h4><p>En Botisur, nos apasiona ofrecerte la mejor selecci칩n de licores y bebidas para tus celebraciones y momentos especiales.</p></div></div>
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-link"><h4>Informaci칩n</h4><ul><li><a href="#">T칠rminos y condiciones</a></li><li><a href="#">Pol칤tica de privacidad</a></li></ul></div></div>
                <div class="col-lg-4 col-md-12 col-sm-12"><div class="footer-link-contact"><h4>Cont치ctanos</h4><ul><li><p><i class="fas fa-map-marker-alt"></i>Direcci칩n: Av. Los Robles 1234, <br>Puerto Montt, Regi칩n de los Lagos </p></li><li><p><i class="fas fa-phone-square"></i>Tel칠fono: <a href="tel:+56912345678">+56 9 1234 5678</a></p></li><li><p><i class="fas fa-envelope"></i>Email: <a href="mailto:contacto@botisur.cl">contacto@botisur.cl</a></p></li></ul></div></div>
            </div>
        </div></div>
    </footer>
    <div class="footer-copyright"><p class="footer-company">Todos los derechos reservados. &copy; 2025 <a href="#">Botisur</a></p></div>
    <a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.superslides.min.js"></script>
    <script src="js/bootsnav.js."></script>
    <script src="js/custom.js"></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Funci칩n para crear la tarjeta de un producto
        function createProductCard(producto, isOffer = false) {
            const imageUrl = producto.imagen_url || `https://placehold.co/400x300/e8e8e8/666?text=${encodeURIComponent(producto.nombre)}`;
            const priceHtml = isOffer 
                ? `<del class="text-muted">$${(parseFloat(producto.precio) * 1.2).toLocaleString('es-CL')}</del> <strong>$${parseFloat(producto.precio).toLocaleString('es-CL')}</strong>`
                : `$${parseFloat(producto.precio).toLocaleString('es-CL')}`;

            return `
                <div class="col-sm-6 col-md-6 col-lg-4 col-xl-4">
                    <div class="products-single fix">
                        <div class="box-img-hover">
                            ${isOffer ? '<div class="type-lb"><p class="sale">Oferta</p></div>' : ''}
                            <img src="${imageUrl}" class="img-fluid" alt="${producto.nombre}" style="height: 200px; object-fit: cover;" onerror="this.onerror=null;this.src='https://placehold.co/400x300/e8e8e8/666?text=Imagen no disponible';"/>
                            <div class="mask-icon">
                                <ul>
                                    <li><a href="shop.html" data-toggle="tooltip" data-placement="right" title="Ver en Tienda"><i class="fas fa-eye"></i></a></li>
                                </ul>
                                <a class="cart" href="shop.html">Ir a la Tienda</a>
                            </div>
                        </div>
                        <div class="why-text">
                            <h4>${producto.nombre}</h4>
                            <h5>${priceHtml}</h5>
                        </div>
                    </div>
                </div>`;
        }
        
        // Funci칩n para cargar los productos
        async function loadFeaturedProducts() {
            const ofertasContainer = document.getElementById('ofertas-container');
            const destacadosContainer = document.getElementById('destacados-container');
            
            ofertasContainer.innerHTML = '<div class="col-12 text-center"><div class="spinner-border text-primary" role="status"></div></div>';
            destacadosContainer.innerHTML = '<div class="col-12 text-center"><div class="spinner-border text-primary" role="status"></div></div>';

            try {
                const response = await fetch(`${API_URL}/productos/?limit=7`); // Pedimos 7 productos en total
                if (!response.ok) throw new Error('Error de conexi칩n');
                const productos = await response.json();
                
                // Limpiar contenedores
                ofertasContainer.innerHTML = '';
                destacadosContainer.innerHTML = '';

                if (productos.length === 0) {
                     ofertasContainer.innerHTML = '<div class="col-12 text-center text-muted"><p>No hay ofertas disponibles.</p></div>';
                     destacadosContainer.innerHTML = '<div class="col-12 text-center text-muted"><p>No hay productos para mostrar.</p></div>';
                     return;
                }

                // Los primeros 3 para ofertas
                const ofertas = productos.slice(0, 3);
                ofertas.forEach(producto => {
                    ofertasContainer.innerHTML += createProductCard(producto, true);
                });

                // Los siguientes 4 para destacados
                const destacados = productos.slice(3, 7);
                destacados.forEach(producto => {
                    destacadosContainer.innerHTML += createProductCard(producto, false);
                });

            } catch (error) {
                 ofertasContainer.innerHTML = `<div class="col-12 text-center text-danger"><p>No se pudieron cargar las ofertas.</p></div>`;
                 destacadosContainer.innerHTML = `<div class="col-12 text-center text-danger"><p>No se pudieron cargar los productos.</p></div>`;
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadFeaturedProducts();
        });
    </script>
</body>
</html>
